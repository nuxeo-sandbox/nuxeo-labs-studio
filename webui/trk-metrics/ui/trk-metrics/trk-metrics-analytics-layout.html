<dom-module id="trk-metrics-analytics-layout">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
      }

      iframe {
        width: 100%;
        height: calc(100vh - 92px);
        border: 0;
      }
    </style>

    <nuxeo-operation auto="true" op="javascript.trk_GetKibanaURL" on-response="_setKibanaUrl"></nuxeo-operation>

    <iframe src="[[_kibanaURL]]" height="600" width="800"></iframe>

  </template>

  <script>
    Polymer({
      is: 'trk-metrics-analytics-layout',
      behaviors: [Nuxeo.LayoutBehavior],
      properties: {
        _kibanaURL: String
      },

      _setKibanaUrl: function (data) {
        if (data && data.detail && data.detail.response && data.detail.response.value) {
          this._kibanaURL = data.detail.response.value;
        }
      }

    });
  </script>
</dom-module>
